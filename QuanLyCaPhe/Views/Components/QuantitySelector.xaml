<UserControl x:Class="QuanLyCaPhe.Views.Components.QuantitySelector"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Name="root"
             Height="36" Width="120">

    <UserControl.Resources>
        <Style x:Key="ArrowButtonStyle" TargetType="RepeatButton">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Width" Value="24"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Focusable" Value="False"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RepeatButton">
                        <Grid Background="Transparent">
                            <Path x:Name="Arrow" 
                                  Data="{Binding Content, RelativeSource={RelativeSource TemplatedParent}}" 
                                  Fill="#4F46E5" 
                                  HorizontalAlignment="Center" VerticalAlignment="Center"
                                  Stretch="Uniform" Width="8"/>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Arrow" Property="Fill" Value="#6366F1"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="Arrow" Property="Fill" Value="#1E1B4B"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Border x:Name="BaseBorder"
            Background="White"
            BorderBrush="Transparent"
            BorderThickness="1"
            CornerRadius="4" 
            SnapsToDevicePixels="True">

        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBox x:Name="InputBox"
                     Grid.Column="0"
                     Text="{Binding Value, ElementName=root, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                     Background="Transparent"
                     BorderThickness="0"
                     Foreground="#1E1B4B"
                     FontSize="14"
                     VerticalContentAlignment="Center"
                     HorizontalContentAlignment="Left"
                     Padding="10,0,0,0"
                     PreviewTextInput="InputBox_PreviewTextInput"
                     TextChanged="InputBox_TextChanged"/>

            <Grid Grid.Column="1" Margin="0,0,5,0">
                <StackPanel Orientation="Vertical" 
                            HorizontalAlignment="Center" VerticalAlignment="Center">
                    <RepeatButton Click="BtnUp_Click"
                                  Style="{StaticResource ArrowButtonStyle}"
                                  VerticalAlignment="Top"
                                  Height="15"
                                  Content="M 0 4 L 4 0 L 8 4 Z"
                                  Delay="400" Interval="100"/>

                    <RepeatButton Click="BtnDown_Click"
                                  Style="{StaticResource ArrowButtonStyle}"
                                  Height="15"
                                  VerticalAlignment="Bottom"
                                  Content="M 0 0 L 4 4 L 8 0 Z" 
                                  Delay="400" Interval="100"/>
                </StackPanel>
            </Grid>
        </Grid>

        <Border.Effect>
            <DropShadowEffect Color="#4F46E5" Opacity="0.15" BlurRadius="10" ShadowDepth="3" Direction="270"/>
        </Border.Effect>
    </Border>

    <UserControl.Triggers>
        <EventTrigger RoutedEvent="MouseEnter">
            <BeginStoryboard>
                <Storyboard>
                    <ColorAnimation Storyboard.TargetName="BaseBorder" Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)" To="#F8FAFF" Duration="0:0:0.1"/>
                    <ColorAnimation Storyboard.TargetName="BaseBorder" Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)" To="#6366F1" Duration="0:0:0.1"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
        <EventTrigger RoutedEvent="MouseLeave">
            <BeginStoryboard>
                <Storyboard>
                    <ColorAnimation Storyboard.TargetName="BaseBorder" Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)" To="White" Duration="0:0:0.1"/>
                    <ColorAnimation Storyboard.TargetName="BaseBorder" Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)" To="Transparent" Duration="0:0:0.1"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </UserControl.Triggers>
</UserControl>