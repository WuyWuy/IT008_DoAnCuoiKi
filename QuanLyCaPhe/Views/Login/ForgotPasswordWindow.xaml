<Window x:Class="QuanLyCaPhe.Views.Login.ForgotPasswordWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Quên Mật Khẩu" Height="500" Width="400"
        WindowStartupLocation="CenterScreen" ResizeMode="NoResize"
        WindowStyle="None" AllowsTransparency="True" Background="Transparent">

    <Border CornerRadius="20" Background="White" BorderBrush="#E5E7EB" BorderThickness="1">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="auto"/>
            </Grid.RowDefinitions>

            <Button Grid.Row="0"
                    Content="✕" HorizontalAlignment="Right" VerticalAlignment="Top"
                    Width="40" Height="40" Margin="10"
                    Background="Transparent" BorderThickness="0" 
                    Foreground="#6B7280" FontSize="18" Cursor="Hand"
                    Focusable="False"
                    Click="BtnClose_Click"/>

            <Border Grid.Row="0">
                <StackPanel Orientation="Horizontal" 
                            HorizontalAlignment="Center" VerticalAlignment="Top" 
                            Margin="0,30,0,0">
                    <TextBlock Text="JetM" 
                    Style="{StaticResource FontHeader}"
                    VerticalAlignment="Center"/>

                    <Path Data="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"
                          Fill="#B0C4DE" Stretch="Uniform"
                          Height="35" Width="28" Margin="3,2,3,0"
                          VerticalAlignment="Center"/>

                    <TextBlock Text="on Coffee" 
                               Style="{StaticResource FontHeader}"
                        VerticalAlignment="Center"/>
                </StackPanel>
            </Border>

            
            <StackPanel Grid.Row="1" Margin="40" VerticalAlignment="Top">

                <TextBlock Text="KHÔI PHỤC MẬT KHẨU" Style="{StaticResource FontHeaderMedium}" HorizontalAlignment="Center" Margin="0,0,0,80"/>
                
                <StackPanel x:Name="pnlSendMail">
                    <TextBlock Text="Nhập email đã đăng ký để nhận mã OTP." Foreground="#64748B" TextWrapping="Wrap" Margin="0,0,0,15"/>
                    <TextBox x:Name="txtEmail" Height="35" Style="{StaticResource MaterialTextBoxStyle}"/>
                    <Button Content="GỬI MÃ OTP" Height="40" Margin="0,20,0,0" IsDefault="True"
                            Style="{StaticResource SurprisePaymentButtonStyle}" Click="BtnSendOTP_Click"/>
                </StackPanel>

                <StackPanel x:Name="pnlVerifyOTP" Visibility="Collapsed">
                    <TextBlock Text="Đã gửi mã đến email. Vui lòng kiểm tra." Foreground="#10B981" Margin="0,0,0,10"/>
                    <TextBox x:Name="txtOTP" Height="35" Style="{StaticResource MaterialTextBoxStyle}" MaxLength="6" HorizontalContentAlignment="Center" FontSize="18" FontWeight="Bold"/>
                    <Button Content="XÁC NHẬN" Height="40" Margin="0,20,0,0" IsDefault="True"
                            Style="{StaticResource SurprisePaymentButtonStyle}" Click="BtnVerifyOTP_Click"/>
                    <TextBlock Text="Gửi lại mã" Cursor="Hand" Foreground="Blue" HorizontalAlignment="Center" Margin="0,10,0,0" MouseDown="ResendOTP_Click"/>
                </StackPanel>

                <StackPanel x:Name="pnlNewPass" Visibility="Collapsed">
                    <TextBlock Text="Mật khẩu mới" Style="{StaticResource FontMenu}"/>
                    <PasswordBox x:Name="txtNewPass" Height="35" Style="{StaticResource MaterialPasswordBoxStyle}"/>

                    <TextBlock Text="Nhập lại mật khẩu" Style="{StaticResource FontMenu}" Margin="0,10,0,0"/>
                    <PasswordBox x:Name="txtConfirmPass" Height="35" Style="{StaticResource MaterialPasswordBoxStyle}"/>

                    <Button Content="ĐỔI MẬT KHẨU" Height="40" Margin="0,20,0,0" IsDefault="True"
                            Style="{StaticResource SurprisePaymentButtonStyle}" Click="BtnChangePass_Click"/>
                </StackPanel>

                <ProgressBar x:Name="progressBar" IsIndeterminate="True" Height="4" Margin="0,20,0,0" Visibility="Collapsed"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>